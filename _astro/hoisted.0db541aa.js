import"./BaseLayout.astro_astro_type_script_index_0_lang.adbd434a.js";const m={"Content-Type":"application/json"},u=({serverURL:t,lang:e,paths:a,signal:i})=>(({serverURL:n,lang:l,paths:s,type:p,signal:h})=>fetch(`${n}/article?path=${encodeURIComponent(s.join(","))}&type=${encodeURIComponent(p.join(","))}&lang=${l}`,{signal:h}).then(o=>o.json()))({serverURL:t,lang:e,paths:a,type:["time"],signal:i}).then(n=>Array.isArray(n)?n:[n]),w=t=>(({serverURL:e,lang:a,path:i,type:n,action:l})=>fetch(`${e}/article?lang=${a}`,{method:"POST",headers:m,body:JSON.stringify({path:i,type:n,action:l})}).then(s=>s.json()))({...t,type:"time",action:"inc"}),g=t=>{const e=((a="")=>a.replace(/\/$/u,""))(t);return/^(https?:)?\/\//.test(e)?e:`https://${e}`},f=t=>{t.name!=="AbortError"&&console.error(t.message)},d=t=>t.dataset.path||t.getAttribute("id"),y=(t,e)=>{e.forEach((a,i)=>{a.innerText=t[i].toString()})},v=({serverURL:t,path:e=window.location.pathname,selector:a=".waline-pageview-count",update:i=!0,lang:n=navigator.language})=>{const l=new AbortController,s=Array.from(document.querySelectorAll(a)),p=o=>{const r=d(o);return r!==null&&e!==r},h=o=>u({serverURL:g(t),paths:o.map(r=>d(r)||e),lang:n,signal:l.signal}).then(r=>y(r,o)).catch(f);if(i){const o=s.filter(c=>!p(c)),r=s.filter(p);w({serverURL:g(t),path:e,lang:n}).then(c=>y(new Array(o.length).fill(c),o)),r.length&&h(r)}else h(s);return l.abort.bind(l)};["localhost","127.0.0.1"].includes(window.location.hostname)||v({serverURL:"https://www.louisfiy.top",path:window.location.pathname,update:["louisfiy.com"].includes(window.location.hostname)});
