import"./BaseLayout.astro_astro_type_script_index_0_lang.adbd434a.js";import"./Waline.astro_astro_type_script_index_0_lang.e5f5e194.js";const d={"Content-Type":"application/json"},u=({serverURL:t,lang:e,paths:a,signal:i})=>(({serverURL:n,lang:s,paths:l,type:p,signal:h})=>fetch(`${n}/article?path=${encodeURIComponent(l.join(","))}&type=${encodeURIComponent(p.join(","))}&lang=${s}`,{signal:h}).then(o=>o.json()))({serverURL:t,lang:e,paths:a,type:["time"],signal:i}).then(n=>Array.isArray(n)?n:[n]),w=t=>(({serverURL:e,lang:a,path:i,type:n,action:s})=>fetch(`${e}/article?lang=${a}`,{method:"POST",headers:d,body:JSON.stringify({path:i,type:n,action:s})}).then(l=>l.json()))({...t,type:"time",action:"inc"}),g=t=>{const e=((a="")=>a.replace(/\/$/u,""))(t);return/^(https?:)?\/\//.test(e)?e:`https://${e}`},f=t=>{t.name!=="AbortError"&&console.error(t.message)},y=t=>t.dataset.path||t.getAttribute("id"),m=(t,e)=>{e.forEach((a,i)=>{a.innerText=t[i].toString()})},v=({serverURL:t,path:e=window.location.pathname,selector:a=".waline-pageview-count",update:i=!0,lang:n=navigator.language})=>{const s=new AbortController,l=Array.from(document.querySelectorAll(a)),p=o=>{const r=y(o);return r!==null&&e!==r},h=o=>u({serverURL:g(t),paths:o.map(r=>y(r)||e),lang:n,signal:s.signal}).then(r=>m(r,o)).catch(f);if(i){const o=l.filter(c=>!p(c)),r=l.filter(p);w({serverURL:g(t),path:e,lang:n}).then(c=>m(new Array(o.length).fill(c),o)),r.length&&h(r)}else h(l);return s.abort.bind(s)};/^(localhost|127.0.0.1|192.168.)/.test(window.location.hostname)||v({serverURL:"https://www.louisfiy.top",update:/^(louisfiy.com)/.test(window.location.hostname)});
