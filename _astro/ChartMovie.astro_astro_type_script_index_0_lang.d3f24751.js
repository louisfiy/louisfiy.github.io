import{_ as O,j as ne,K as ie,aH as Ae,aU as se,b1 as X,k as ye,h as be,aQ as Se,n as E,o as k,q as _e,aZ as xe,A as Z,aF as we,av as De,a7 as z,C as Ie,R as oe,m as he,x as Pe,w as Le,b2 as Ce,v as Me,t as ke,b3 as Oe,z as le,G as Te,b4 as Re,b5 as Ve,u as Ee,i as Be,a as Ne}from"./installCanvasRenderer.5ae64406.js";import{c as ue,h as Ge,g as We,i as ce,a as Fe,e as Ye,f as ze}from"./install.09e64e33.js";import{g as Ue}from"./sectorHelper.0137d794.js";var ge=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return O(t,e),t.prototype.getInitialData=function(e,t){return ue(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,t,r){var a=this.coordinateSystem;if(a&&a.clampData){var i=a.clampData(e),n=a.dataToPoint(i);if(r)ne(a.getAxes(),(function(e,r){if("category"===e.type&&null!=t){var a=e.getTicksCoords(),s=i[r],o="x1"===t[r]||"y1"===t[r];if(o&&(s+=1),a.length<2)return;if(2===a.length)return void(n[r]=e.toGlobalCoord(e.getExtent()[o?1:0]));for(var l=void 0,d=void 0,h=1,u=0;u<a.length;u++){var c=a[u].coord,g=u===a.length-1?a[u-1].tickValue+h:a[u].tickValue;if(g===s){d=c;break}if(g<s)l=c;else if(null!=l&&g>s){d=(c+l)/2;break}1===u&&(h=g-a[0].tickValue)}null==d&&(l?l&&(d=a[a.length-1].coord):d=a[0].coord),n[r]=e.toGlobalCoord(d)}}));else{var s=this.getData(),o=s.getLayout("offset"),l=s.getLayout("size"),d=a.getBaseAxis().isHorizontal()?0:1;n[d]+=o+l/2}return n}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ie);ie.registerClass(ge);const $=ge;var Xe=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.type=t.type,r}return O(t,e),t.prototype.getInitialData=function(){return ue(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},t.prototype.brushSelector=function(e,t,r){return r.rect(t.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Ae($.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}($);const Ze=Xe;var $e=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},je=function(e){function t(t){var r=e.call(this,t)||this;return r.type="sausage",r}return O(t,e),t.prototype.getDefaultShape=function(){return new $e},t.prototype.buildPath=function(e,t){var r=t.cx,a=t.cy,i=Math.max(t.r0||0,0),n=Math.max(t.r,0),s=.5*(n-i),o=i+s,l=t.startAngle,d=t.endAngle,h=t.clockwise,u=2*Math.PI,c=h?d-l<u:l-d<u;c||(l=d-(h?u:-u));var g=Math.cos(l),p=Math.sin(l),f=Math.cos(d),y=Math.sin(d);c?(e.moveTo(g*i+r,p*i+a),e.arc(g*o+r,p*o+a,s,-Math.PI+l,l,!h)):e.moveTo(g*n+r,p*n+a),e.arc(r,a,n,l,d,!h),e.arc(f*o+r,y*o+a,s,d-2*Math.PI,d-Math.PI,!h),0!==i&&e.arc(r,a,i,d,l,h)},t}(se);const j=je;function qe(e,t){var r=(t=t||{}).isRoundCap;return function(t,a,i){var n=a.position;if(!n||n instanceof Array)return X(t,a,i);var s=e(n),o=null!=a.distance?a.distance:5,l=this.shape,d=l.cx,h=l.cy,u=l.r,c=l.r0,g=(u+c)/2,p=l.startAngle,f=l.endAngle,y=(p+f)/2,m=r?Math.abs(u-c)/2:0,v=Math.cos,A=Math.sin,b=d+u*v(p),x=h+u*A(p),_="left",I="top";switch(s){case"startArc":b=d+(c-o)*v(y),x=h+(c-o)*A(y),_="center",I="top";break;case"insideStartArc":b=d+(c+o)*v(y),x=h+(c+o)*A(y),_="center",I="bottom";break;case"startAngle":b=d+g*v(p)+T(p,o+m,!1),x=h+g*A(p)+R(p,o+m,!1),_="right",I="middle";break;case"insideStartAngle":b=d+g*v(p)+T(p,-o+m,!1),x=h+g*A(p)+R(p,-o+m,!1),_="left",I="middle";break;case"middle":b=d+g*v(y),x=h+g*A(y),_="center",I="middle";break;case"endArc":b=d+(u+o)*v(y),x=h+(u+o)*A(y),_="center",I="bottom";break;case"insideEndArc":b=d+(u-o)*v(y),x=h+(u-o)*A(y),_="center",I="top";break;case"endAngle":b=d+g*v(f)+T(f,o+m,!0),x=h+g*A(f)+R(f,o+m,!0),_="left",I="middle";break;case"insideEndAngle":b=d+g*v(f)+T(f,-o+m,!0),x=h+g*A(f)+R(f,-o+m,!0),_="right",I="middle";break;default:return X(t,a,i)}return(t=t||{}).x=b,t.y=x,t.align=_,t.verticalAlign=I,t}}function He(e,t,r,a){if(ye(a))e.setTextConfig({rotation:a});else if(be(t))e.setTextConfig({rotation:0});else{var i,n=e.shape,s=n.clockwise?n.startAngle:n.endAngle,o=n.clockwise?n.endAngle:n.startAngle,l=(s+o)/2,d=r(t);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":i=l;break;case"startAngle":case"insideStartAngle":i=s;break;case"endAngle":case"insideEndAngle":i=o;break;default:return void e.setTextConfig({rotation:0})}var h=1.5*Math.PI-i;"middle"===d&&h>Math.PI/2&&h<1.5*Math.PI&&(h-=Math.PI),e.setTextConfig({rotation:h})}}function T(e,t,r){return t*Math.sin(e)*(r?-1:1)}function R(e,t,r){return t*Math.cos(e)*(r?1:-1)}var F=Math.max,Y=Math.min;function Ke(e,t){var r=e.getArea&&e.getArea();if(ce(e,"cartesian2d")){var a=e.getBaseAxis();if("category"!==a.type||!a.onBand){var i=t.getLayout("bandWidth");a.isHorizontal()?(r.x-=i,r.width+=2*i):(r.y-=i,r.height+=2*i)}}return r}var Qe=function(e){function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return O(t,e),t.prototype.render=function(e,t,r,a){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var i=e.get("coordinateSystem");("cartesian2d"===i||"polar"===i)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,r):this._renderNormal(e,t,r,a))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},t.prototype.eachRendered=function(e){Se(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},t.prototype._renderNormal=function(e,t,r,a){var i,n=this.group,s=e.getData(),o=this._data,l=e.coordinateSystem,d=l.getBaseAxis();"cartesian2d"===l.type?i=d.isHorizontal():"polar"===l.type&&(i="angle"===d.dim);var h=e.isAnimationEnabled()?e:null,u=Je(e,l);u&&this._enableRealtimeSort(u,s,r);var c=e.get("clip",!0)||u,g=Ke(l,s);n.removeClipPath();var p=e.get("roundCap",!0),f=e.get("showBackground",!0),y=e.getModel("backgroundStyle"),m=y.get("borderRadius")||0,v=[],A=this._backgroundEls,b=a&&a.isInitSort,x=a&&"changeAxisOrder"===a.type;function _(e){var t=V[l.type](s,e),r=st(l,i,t);return r.useStyle(y.getItemStyle()),"cartesian2d"===l.type?r.setShape("r",m):r.setShape("cornerRadius",m),v[e]=r,r}s.diff(o).add((function(t){var r=s.getItemModel(t),a=V[l.type](s,t,r);if(f&&_(t),s.hasValue(t)&&J[l.type](a)){var o=!1;c&&(o=q[l.type](g,a));var y=H[l.type](e,s,t,a,i,h,d.model,!1,p);u&&(y.forceLabelAnimation=!0),ee(y,s,t,r,a,e,i,"polar"===l.type),b?y.attr({shape:a}):u?K(u,h,y,a,t,i,!1,!1):E(y,{shape:a},e,t),s.setItemGraphicEl(t,y),n.add(y),y.ignore=o}})).update((function(t,r){var a=s.getItemModel(t),I=V[l.type](s,t,a);if(f){var w=void 0;0===A.length?w=_(r):((w=A[r]).useStyle(y.getItemStyle()),"cartesian2d"===l.type?w.setShape("r",m):w.setShape("cornerRadius",m),v[t]=w);var S=V[l.type](s,t),M=ve(i,S,l);k(w,{shape:M},h,t)}var R=o.getItemGraphicEl(r);if(s.hasValue(t)&&J[l.type](I)){var O=!1;if(c&&((O=q[l.type](g,I))&&n.remove(R)),R?_e(R):R=H[l.type](e,s,t,I,i,h,d.model,!!R,p),u&&(R.forceLabelAnimation=!0),x){var L=R.getTextContent();if(L){var C=xe(L);null!=C.prevValue&&(C.prevValue=C.value)}}else ee(R,s,t,a,I,e,i,"polar"===l.type);b?R.attr({shape:I}):u?K(u,h,R,I,t,i,!0,x):k(R,{shape:I},e,t,null),s.setItemGraphicEl(t,R),R.ignore=O,n.add(R)}else n.remove(R)})).remove((function(t){var r=o.getItemGraphicEl(t);r&&Z(r,e,t)})).execute();var I=this._backgroundGroup||(this._backgroundGroup=new we);I.removeAll();for(var w=0;w<v.length;++w)I.add(v[w]);n.add(I),this._backgroundEls=v,this._data=s},t.prototype._renderLarge=function(e,t,r){this._clear(),re(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),re(t,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&Ge(e.coordinateSystem,!1,e),r=this.group;t?r.setClipPath(t):r.removeClipPath()},t.prototype._enableRealtimeSort=function(e,t,r){var a=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,r),this._isFirstFrame=!1;else{var n=function(e){var r=t.getItemGraphicEl(e),a=r&&r.shape;return a&&Math.abs(i.isHorizontal()?a.height:a.width)||0};this._onRendered=function(){a._updateSortWithinSameData(t,n,i,r)},r.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,t,r){var a=[];return e.each(e.mapDimension(t.dim),(function(e,t){var i=r(t);i=i??NaN,a.push({dataIndex:t,mappedValue:i,ordinalNumber:e})})),a.sort((function(e,t){return t.mappedValue-e.mappedValue})),{ordinalNumbers:De(a,(function(e){return e.ordinalNumber}))}},t.prototype._isOrderChangedWithinSameData=function(e,t,r){for(var a=r.scale,i=e.mapDimension(r.dim),n=Number.MAX_VALUE,s=0,o=a.getOrdinalMeta().categories.length;s<o;++s){var l=e.rawIndexOf(i,a.getRawOrdinalNumber(s)),d=l<0?Number.MIN_VALUE:t(e.indexOfRawIndex(l));if(d>n)return!0;n=d}return!1},t.prototype._isOrderDifferentInView=function(e,t){for(var r=t.scale,a=r.getExtent(),i=Math.max(0,a[0]),n=Math.min(a[1],r.getOrdinalMeta().categories.length-1);i<=n;++i)if(e.ordinalNumbers[i]!==r.getRawOrdinalNumber(i))return!0},t.prototype._updateSortWithinSameData=function(e,t,r,a){if(this._isOrderChangedWithinSameData(e,t,r)){var i=this._dataSort(e,r,t);this._isOrderDifferentInView(i,r)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:i}))}},t.prototype._dispatchInitSort=function(e,t,r){var a=t.baseAxis,i=this._dataSort(e,a,(function(r){return e.get(e.mapDimension(t.otherAxis.dim),r)}));r.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:i})},t.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},t.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var t=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl((function(t){Z(t,e,z(t).dataIndex)}))):t.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Ie),q={cartesian2d:function(e,t){var r=t.width<0?-1:1,a=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,n=e.y+e.height,s=F(t.x,e.x),o=Y(t.x+t.width,i),l=F(t.y,e.y),d=Y(t.y+t.height,n),h=o<s,u=d<l;return t.x=h&&s>i?o:s,t.y=u&&l>n?d:l,t.width=h?0:o-s,t.height=u?0:d-l,r<0&&(t.x+=t.width,t.width=-t.width),a<0&&(t.y+=t.height,t.height=-t.height),h||u},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var a=t.r;t.r=t.r0,t.r0=a}var i=Y(t.r,e.r),n=F(t.r0,e.r0);t.r=i,t.r0=n;var s=i-n<0;if(r<0){a=t.r;t.r=t.r0,t.r0=a}return s}},H={cartesian2d:function(e,t,r,a,i,n,s,o,l){var d=new oe({shape:he({},a),z2:1});(d.__dataIndex=r,d.name="item",n)&&(d.shape[i?"height":"width"]=0);return d},polar:function(e,t,r,a,i,n,s,o,l){var d=!i&&l?j:le,h=new d({shape:a,z2:1});h.name="item";var u=de(i);if(h.calculateTextPosition=qe(u,{isRoundCap:d===j}),n){var c=i?"r":"endAngle",g={};h.shape[c]=i?a.r0:a.startAngle,g[c]=a[c],(o?k:E)(h,{shape:g},n)}return h}};function Je(e,t){var r=e.get("realtimeSort",!0),a=t.getBaseAxis();if(r&&"category"===a.type&&"cartesian2d"===t.type)return{baseAxis:a,otherAxis:t.getOtherAxis(a)}}function K(e,t,r,a,i,n,s,o){var l,d;n?(d={x:a.x,width:a.width},l={y:a.y,height:a.height}):(d={y:a.y,height:a.height},l={x:a.x,width:a.width}),o||(s?k:E)(r,{shape:l},t,i,null);var h=t?e.baseAxis.model:null;(s?k:E)(r,{shape:d},h,i)}function Q(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var et=["x","y","width","height"],tt=["cx","cy","r","startAngle","endAngle"],J={cartesian2d:function(e){return!Q(e,et)},polar:function(e){return!Q(e,tt)}},V={cartesian2d:function(e,t,r){var a=e.getItemLayout(t),i=r?at(r,a):0,n=a.width>0?1:-1,s=a.height>0?1:-1;return{x:a.x+n*i/2,y:a.y+s*i/2,width:a.width-n*i,height:a.height-s*i}},polar:function(e,t,r){var a=e.getItemLayout(t);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function rt(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function de(e){return t=e?"Arc":"Angle",function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}};var t}function ee(e,t,r,a,i,n,s,o){var l=t.getItemVisual(r,"style");if(o){if(!n.get("roundCap")){var d=e.shape,h=Ue(a.getModel("itemStyle"),d,!0);he(d,h),e.setShape(d)}}else{var u=a.get(["itemStyle","borderRadius"])||0;e.setShape("r",u)}e.useStyle(l);var c=a.getShallow("cursor");c&&e.attr("cursor",c);var g=o?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=Pe(a);Le(e,p,{labelFetcher:n,labelDataIndex:r,defaultText:We(n.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:g});var f=e.getTextContent();if(o&&f){var y=a.get(["label","position"]);e.textConfig.inside="middle"===y||null,He(e,"outside"===y?g:y,de(s),a.get(["label","rotate"]))}Ce(f,p,n.getRawValue(r),(function(e){return Fe(t,e)}));var m=a.getModel(["emphasis"]);Me(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),ke(e,a),rt(i)&&(e.style.fill="none",e.style.stroke="none",ne(e.states,(function(e){e.style&&(e.style.fill=e.style.stroke="none")})))}function at(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||"none"===r)return 0;var a=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),n=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(a,i,n)}var nt=function(){},te=function(e){function t(t){var r=e.call(this,t)||this;return r.type="largeBar",r}return O(t,e),t.prototype.getDefaultShape=function(){return new nt},t.prototype.buildPath=function(e,t){for(var r=t.points,a=this.baseDimIdx,i=1-this.baseDimIdx,n=[],s=[],o=this.barWidth,l=0;l<r.length;l+=3)s[a]=o,s[i]=r[l+2],n[a]=r[l+a],n[i]=r[l+i],e.rect(n[0],n[1],s[0],s[1])},t}(se);function re(e,t,r,a){var i=e.getData(),n=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),o=i.getLayout("size"),l=e.getModel("backgroundStyle"),d=i.getLayout("largeBackgroundPoints");if(d){var h=new te({shape:{points:d},incremental:!!a,silent:!0,z2:0});h.baseDimIdx=n,h.largeDataIndices=s,h.barWidth=o,h.useStyle(l.getItemStyle()),t.add(h),r&&r.push(h)}var u=new te({shape:{points:i.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=n,u.largeDataIndices=s,u.barWidth=o,t.add(u),u.useStyle(i.getVisual("style")),z(u).seriesIndex=e.seriesIndex,e.get("silent")||(u.on("mousedown",ae),u.on("mousemove",ae)),r&&r.push(u)}var ae=Oe((function(e){var t=it(this,e.offsetX,e.offsetY);z(this).dataIndex=t>=0?t:null}),30,!1);function it(e,t,r){for(var a=e.baseDimIdx,i=1-a,n=e.shape.points,s=e.largeDataIndices,o=[],l=[],d=e.barWidth,h=0,u=n.length/3;h<u;h++){var c=3*h;if(l[a]=d,l[i]=n[c+2],o[a]=n[c+a],o[i]=n[c+i],l[i]<0&&(o[i]+=l[i],l[i]=-l[i]),t>=o[0]&&t<=o[0]+l[0]&&r>=o[1]&&r<=o[1]+l[1])return s[h]}return-1}function ve(e,t,r){if(ce(r,"cartesian2d")){var a=t,i=r.getArea();return{x:e?a.x:i.x,y:e?i.y:a.y,width:e?a.width:i.width,height:e?i.height:a.height}}var n=t;return{cx:(i=r.getArea()).cx,cy:i.cy,r0:e?i.r0:n.r0,r:e?i.r:n.r,startAngle:e?n.startAngle:0,endAngle:e?n.endAngle:2*Math.PI}}function st(e,t,r){return new("polar"===e.type?le:oe)({shape:ve(t,r,e),silent:!0,z2:0})}const ot=Qe;function ht(e){e.registerChartView(ot),e.registerSeriesModel(Ze),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,Te(Ve,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Re("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Ye("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},(function(t){e.sortInfo&&t.axis.setCategorySortInfo(e.sortInfo)}))}))}Ee([ht,ze,Ne]);let pe=Be(document.getElementById("chart_movie"));pe.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},xAxis:{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},yAxis:{type:"value"},series:[{name:"电影",data:[5,5,1,5,4,14,21,12,14,29,9,14],type:"bar",stack:"观影量"},{name:"剧集",data:[7,5,6,12,8,7,2,0,1,2,4,1],type:"bar",stack:"观影量"},{name:"短片",data:[6,16,4,10,12,0,0,0,1,9,4,0],type:"bar",stack:"观影量"}]}),window.addEventListener("resize",(()=>{pe.resize()}));