<!DOCTYPE html><html class=astro-37FXCHFA lang=zh><head><meta charset=utf-8><link href=/favicon.svg rel=icon type=image/svg+xml><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Astro v2.1.6" name=generator><meta content="An Astro Blog Website" name=description><title>（原）开发日志 · 语冰</title><script src=//sdk.51.la/js-sdk-pro.min.js charset=UTF-8 id=LA_COLLECT></script><link href=/_astro/404.778e31f9.css rel=stylesheet /><link href=/_astro/logs.f3be520a.css rel=stylesheet /><script src=/_astro/hoisted.7e3618db.js type=module></script></head><body class=astro-37FXCHFA><header class=width-container><div class="flex items-center sm:space-x-8 space-x-6"><a href=/ class="decoration-blue-600 decoration-wavy">首页</a> <a href=/archives class="decoration-blue-600 decoration-wavy">归档</a><a href=/tags class="decoration-blue-600 decoration-wavy">标签</a><a href=/message class="decoration-blue-600 decoration-wavy">留言</a><a href=/about class="decoration-blue-600 decoration-wavy">关于</a></div></header><main class="astro-37FXCHFA width-container"><h1>（原）开发日志</h1><p>（前）本博客使用 <a href=https://hexo.io/zh-cn/ >Hexo</a> 搭建。本文假设您能够阅读并理解文中提到的技术。</p><h2 id=准备工作>准备工作</h2><p>首先安装：</p><ul><li><a href=https://nodejs.org/zh-cn/ >Node.js</a>（版本 > 12.13.0）</li><li><a href=http://git-scm.com/ >Git</a></li></ul><p>安装完上述应用程序后，即可使用 npm 全局安装并初始化 Hexo 文件夹：</p><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>$ npm install -g hexo-cli</span></span>
<span class=line><span style=color:#c9d1d9>$ hexo init </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>folder</span><span style=color:#ff7b72>></span></span>
<span class=line><span style=color:#c9d1d9>$ </span><span style=color:#79c0ff>cd</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>folder</span><span style=color:#ff7b72>></span></span>
<span class=line><span style=color:#c9d1d9>$ npm install</span></span></code></pre><p>不全局安装的情况下，使用 npx 命令：</p><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>$ npx hexo init </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>folder</span><span style=color:#ff7b72>></span></span>
<span class=line><span style=color:#c9d1d9>$ </span><span style=color:#79c0ff>cd</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>folder</span><span style=color:#ff7b72>></span></span>
<span class=line><span style=color:#c9d1d9>$ npm install</span></span></code></pre><h2 id=项目结构>项目结构</h2><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#79c0ff>.</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── .deploy_</span><span style=color:#ff7b72>*</span><span style=color:#c9d1d9>           // 一键部署生成的文件夹</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── public              // 构建生成的静态文件</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── scaffolds           // 创建文章使用的模板</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── scripts             // 自定义脚本</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── </span><span style=color:#79c0ff>source</span><span style=color:#c9d1d9>              // 用户资源文件</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>   </span><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── _drafts         // 草稿文件夹</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>   </span><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── _posts          // 文章文件夹</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>   </span><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── [custom]        // 自定义页面</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>   </span><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── css             // 样式</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>   </span><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── img             // 静态资源</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>   </span><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── js              // 脚本</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── themes              // 主题文件夹</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── _config.[theme].yml // 主题配置文件</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── _config.yml         // 配置文件</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── db.json             // 缓存文件</span></span>
<span class=line><span style=color:#ff7b72>|</span><span style=color:#c9d1d9>── package.json</span></span></code></pre><p>Hexo 配置在 <code>_config.yml</code> 中修改，参考：<a href=https://hexo.io/zh-cn/docs/configuration>Hexo 配置</a>。</p><p>主题配置建议在 <code>_config.[theme].yml</code> 中修改，以当前使用的主题 Fluid 为例，参考：<a href=https://hexo.fluid-dev.com/docs/guide/ >Fluid 配置</a>。</p><h2 id=快速开始>快速开始</h2><h4 id=新建文章页面草稿>新建文章/页面/草稿</h4><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e># 在 source/_posts 下新建文章，默认 post 可省略</span></span>
<span class=line><span style=color:#c9d1d9>$ hexo new post </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>title</span><span style=color:#ff7b72>></span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e># 在 source 下新建页面</span></span>
<span class=line><span style=color:#c9d1d9>$ hexo new page </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>filename</span><span style=color:#ff7b72>></span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e># 在 source/_drafts 下新建草稿</span></span>
<span class=line><span style=color:#c9d1d9>$ hexo new draft </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>title</span><span style=color:#ff7b72>></span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e># 发表草稿，默认 _posts，也可指定页面 [layout]</span></span>
<span class=line><span style=color:#c9d1d9>$ hex publish [layout] </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>filename</span><span style=color:#ff7b72>></span></span></code></pre><blockquote><p>你也可以手动在 <code>source/_posts</code> 文件夹下创建 .md 文件，并保持统一约定的 <code>Front-matter</code> 规则即可。页面同理。同时 css/js/img 这些静态资源都放到 <code>source</code> 文件夹下。</p></blockquote><p>参考：<a href=https://hexo.io/zh-cn/docs/writing.html>写作</a>、<a href=https://hexo.io/zh-cn/docs/front-matter>Front-matter</a> 和 <a href=https://hexo.io/zh-cn/docs/tag-plugins>标签插件</a></p><h4 id=运行打包>运行/打包</h4><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e># 等同于 hexo serve，启动本地服务 http://localhost:4000</span></span>
<span class=line><span style=color:#c9d1d9>$ npm run serve</span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e># 等同于 hexo clean，清除缓存（db.json）和已生成的静态文件（public）</span></span>
<span class=line><span style=color:#c9d1d9>$ npm run clean</span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e># 等同于 hexo generate，生成的静态文件（public）</span></span>
<span class=line><span style=color:#c9d1d9>$ npm run build</span></span></code></pre><blockquote><p>实际指令见 <code>package.json</code> 中的 NPM 脚本。</p></blockquote><p>参考：<a href=https://hexo.io/zh-cn/docs/commands>指令</a>、<a href=https://hexo.io/zh-cn/docs/server.html>服务器</a> 和 <a href=https://hexo.io/zh-cn/docs/generating.html>生成文件</a></p><h2 id=远程部署>远程部署</h2><ul><li><a href=https://pages.github.com/ >GitHub Pages</a></li></ul><p>在 <a href=https://github.com/ >GitHub</a> 上创建一个公有仓库，命名为 <code>&#x3C;your_github_username>.github.io</code>，将打包生成的 <code>public</code> 文件夹推送到该仓库，访问 https://&#x3C;your_github_username>.github.io 即可。</p><ul><li>一键部署</li></ul><p>在 _config.yml 中配置 <code>deploy</code> 参数，支持多种部署方式，详见 <a href=https://hexo.io/zh-cn/docs/one-command-deployment>Hexo 部署</a>。以 Git 为例：</p><ol><li>首先安装 <a href=https://github.com/hexojs/hexo-deployer-git>hexo-deployer-git</a> 插件：</li></ol><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>$ npm install hexo-deployer-git --save</span></span></code></pre><ol start=2><li>修改配置</li></ol><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>deploy:</span></span>
<span class=line><span style=color:#c9d1d9>  type: git</span></span>
<span class=line><span style=color:#c9d1d9>  repo: https://github.com/</span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>your_github_username</span><span style=color:#ff7b72>></span><span style=color:#c9d1d9>/</span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>your_github_username</span><span style=color:#ff7b72>></span><span style=color:#c9d1d9>.github.io</span></span>
<span class=line><span style=color:#c9d1d9>  branch: main</span></span>
<span class=line><span style=color:#c9d1d9>  token: </span><span style=color:#8b949e># 需要在 GitHub 生成（请勿泄露）</span></span>
<span class=line><span style=color:#c9d1d9>  name: </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>your_git_username</span><span style=color:#ff7b72>></span></span>
<span class=line><span style=color:#c9d1d9>  email: </span><span style=color:#ff7b72>&#x3C;</span><span style=color:#c9d1d9>your_git_email</span><span style=color:#ff7b72>></span></span></code></pre><blockquote><p>如何生成 token？登录 Github → 点击右上角头像 → “Settings” → “Developer settings” → “Personal access tokens” → “Generate new token”</p></blockquote><ol start=3><li>生成站点文件并部署至远程库</li></ol><pre class=astro-code is:raw="" style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>$ npm hexo clean</span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e># 等同于 hexo deploy</span></span>
<span class=line><span style=color:#c9d1d9>$ npm run deploy</span></span></code></pre><p>部署会将 <code>public</code> 下所有文件复制到 <code>.deploy_git</code> 文件夹并推送到上述配置指定的仓库（repo）和分支（branch）中，并完全覆盖该分支下已有的内容。</p><h2 id=技术栈>技术栈</h2><ul><li><a href=https://nodejs.org/zh-cn/ >Node.js</a>：开源、跨平台的 JavaScript 运行时环境。</li><li><a href=https://www.npmjs.com/ >npm</a>：Node.js 的包管理工具。</li><li><a href=https://git-scm.com/ >Git</a>：免费开源的分布式版本控制系统。</li><li><a href=https://hexo.io/zh-cn/ >Hexo</a>：快速、简洁且高效的博客框架。</li><li><a href=https://hexo.fluid-dev.com/docs/ >Fluid</a>：一款 Material Design 风格的 Hexo 博客主题。</li><li><a href=https://waline.js.org/ >Waline</a>：一款简洁、安全的评论系统。</li><li><a href=https://github.com/ >GitHub</a>：面向开源及私有软件项目的托管平台。</li><li><a href=https://vercel.com/ >Vercel</a>：构建前端应用程序的云平台。</li><li><a href=https://www.netlify.com/ >Netlify</a>：构建前端应用程序的云平台。</li><li><a href=https://www.leancloud.cn/ >Leancloud</a>：领先的 Serverless 云服务。</li><li><a href=https://web.51.la/ >51.LA</a>：免费的流量统计技术服务提供商。</li><li><a href=https://www.namesilo.com/ >NameSilo</a>：为你的网站寻找便宜的域名。</li></ul></main><footer class=width-container><div class="flex items-center flex-col sm:flex-row text-gray-500 text-sm"><span>&#169; 2023 ☘️ louisfiy</span> <span class="hidden sm:inline">&nbsp;|&nbsp;</span> <span>Powered by Astro</span></div></footer></body></html>